!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n,o;n=[i(1),i(11),i(7),i(5),i(16),i(4),i(9),i(3),i(12),i(8),i(2),i(10),i(14),i(15),i(13),i(6)],o=function(t){Element.Properties.widget={get:function(){return t.from(this)}},Element.Properties.dataset={get:function(){return t.Dataset.from(this)}},document.addEventListener("DOMContentLoaded",t.run)}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(18)],o=function(){return window.Brickrouge}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1)],o=function(t){"use strict";var e=[],i=new Class({Implements:[Options,Events],options:{},initialize:function(i,n){var o=this;this.element=i,i.addEventListener("click",function(t){t.target==i&&o.hide(o)}),this.setOptions(n),e[t.uidOf(i)]=this,i.addDelegatedEventListener("[data-action]","click",function(t,e){o.action(e.get("data-action"))})},show:function(){var e=this.element;e.classList.add("in"),e.classList.remove("out"),e.classList.remove("hide"),t.notify("modal:show",[this])},hide:function(){var e=this.element;t.notify("modal:hide",[this]),e.classList.remove("in"),e.classList.add("out"),e.classList.add("hide")},isHidden:function(){return this.element.classList.contains("hide")},toggle:function(){this.isHidden()?this.show():this.hide()},action:function(t){this.fireEvent("action",t)}});return i.from=function(n){var o=t.uidOf(n);return o in e?e[o]:e[o]=new i(n)},t.Modal=i,i}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1),i(17)],o=function(t){"use strict";function e(){Object.forEach(i,function(t){t.isVisible()&&n.isElementVisible(t.element)&&t.reposition(!0)})}var i=[],n=t.viewport;return window.addEventListener("load",e),window.addEventListener("resize",e),window.addEventListener("scroll",e),t.Popover=new Class({Implements:[Events,Options],options:{anchor:null,animate:!1,popoverClass:null,placement:null,visible:!1,fitContent:!1,loveContent:!1,iframe:null},initialize:function(t,e){this.element=document.id(t),this.setOptions(e),this.arrow=this.element.querySelector(".popover-arrow"),this.actions=this.element.querySelector(".popover-actions"),this.repositionCallback=this.reposition.bind(this,!1),this.quickRepositionCallback=this.reposition.bind(this,!0),i.push(this),t=this.element,e=this.options,this.iframe=e.iframe,e.anchor&&this.attachAnchor(e.anchor),this.tween=null,e.animate&&(this.tween=new Fx.Tween(t,{property:"opacity",link:"cancel",duration:"short"})),e.fitContent&&t.classList.add("fit-content"),e.popoverClass&&t.classList.add(e.popoverClass),t.addDelegatedEventListener(".popover-actions [data-action]","click",function(t,e){this.fireAction({action:e.get("data-action"),popover:this,event:t})}.bind(this)),e.visible&&this.show()},fireAction:function(t){this.fireEvent("action",arguments)},attachAnchor:function(t){this.anchor=document.id(t),this.anchor||(this.anchor=document.body.querySelector(t)),this.reposition(!0)},changePlacement:function(t){var e={left:"popover-left",right:"popover-right",top:"popover-top",bottom:"popover-bottom"},i=this.element;Object.forEach(e,function(t){i.classList.remove(t)}),i.classList.add(e[t])},show:function(){this.element.setStyles({display:"block",visibility:"hidden"}),this.iframe&&document.id(this.iframe.contentWindow).addEvents({load:this.quickRepositionCallback,resize:this.quickRepositionCallback,scroll:this.quickRepositionCallback}),document.body.appendChild(this.element),this.reposition(!0),this.options.animate?(this.tween.set(0),this.element.setStyle("visibility","visible"),this.tween.start(1)):this.element.setStyle("visibility","visible")},hide:function o(){var o=function(){this.element.setStyle("display",""),this.element.remove()}.bind(this);if(this.iframe){var t=document.id(this.iframe.contentWindow);t.removeEvent("load",this.quickRepositionCallback),t.removeEvent("resize",this.quickRepositionCallback),t.removeEvent("scroll",this.quickRepositionCallback)}this.options.animate?this.tween.start(0).chain(o):o()},isVisible:function(){return this.element.parentNode&&"visible"==this.element.getStyle("visibility")&&"none"!=this.element.getStyle("display")},computeAnchorBox:function(){var t,e,i,n,o,s,r,a,l,c,h,u=this.anchor,d=this.iframe;return d?(e=d.getCoordinates(),i=d.contentDocument.documentElement,a=u.offsetLeft,l=u.offsetTop,c=u.offsetWidth,h=u.offsetHeight,n=i.clientHeight,s=i.scrollTop,l-=s,0>l&&(h+=l),l=Math.max(l,0),h=Math.min(h,n),o=i.clientWidth,r=i.scrollLeft,a-=r,0>a&&(c+=a),a=Math.max(a,0),c=Math.min(c,o),a+=e.left,l+=e.top):(t=u.getCoordinates(),a=t.left,l=t.top,h=t.height,c=t.width),{x:a,y:l,w:c,h:h}},computeBestPlacement:function(t,e,i){function n(){return c+1>e+2*d}function o(){return l-(c+1+u)>e+2*d}function s(){return h+1>i+2*d}var r,a=document.body.parentNode,l=a.scrollWidth,c=t.x,h=t.y,u=t.w,d=20;switch(r=this.options.placement){case"right":if(o())return r;break;case"left":if(n())return r;break;case"top":if(s())return r;break;case"bottom":return r}return o()?"right":n()?"left":s()?"top":"bottom"},reposition:function(t){if(this.anchor){void 0===t&&(t="visible"!=this.element.getStyle("visibility"));var e,i,o,s,r,a,l,c,h,u,d,p,f=20,m=this.actions,v=this.element.getSize(),g=v.x,y=v.y,b=n.getCoordinates(),w=b.left,E=b.top,S=b.width,x=b.height,k={top:null,left:null};e=this.computeAnchorBox(),i=e.x,o=e.y,s=e.w,r=e.h,a=i+s/2-1,l=o+r/2-1,u=this.computeBestPlacement(e,g,y),this.changePlacement(u),"left"==u||"right"==u?(h=Math.round(o+(r-y)/2-1),c="left"==u?i-g+1:i+s-1,c=c.limit(w+f-1,w+S-(g+f)-1),h=h.limit(E+f-1,E+x-(y+f)-1)):(c=Math.round(i+(s-g)/2-1),h="top"==u?o-y+1:o+r-1,c=c.limit(w+f-1,w+S-(g+f)-1)),y>2*f&&("left"==u||"right"==u?(p=o+r/2-1-h,p=Math.min(y-(m?m.getSize().y:f)-10,p),p=Math.max(f,p),p+h-1!=l&&(h-=h+p-l),k.top=p):(d=(i+s/2-1-c).limit(f,g-f),d+g-1!=a&&(c-=c+d-a),k.left=d)),c=Math.floor(Math.max(50,c)),h=Math.floor(Math.max(50,h)),t?(this.element.setStyles({left:c,top:h}),this.arrow.setStyles(k)):(this.element.morph({left:c,top:h}),this.arrow.morph(k))}}}),t.Popover.from=function(e){var i,n=e.title,o=e.content,s=e.actions,r=new Element("div.popover-inner");return n&&r.adopt(new Element("h3.popover-title",{html:n})),"string"==typeOf(o)?r.adopt(new Element("div.popover-content",{html:o})):(r.adopt(new Element("div.popover-content").adopt(o)),void 0===e.fitContent&&(e.fitContent=!0)),"boolean"==s&&(s=[new Element('button.btn.btn-secondary.btn-cancel[data-action="cancel"]',{html:Locale.get("Popover.cancel")||"Cancel"}),new Element('button.btn.btn-primary[data-action="ok"]',{html:Locale.get("Popover.ok")||"Ok"})]),s&&r.adopt(new Element("div.popover-actions").adopt(s)),i=new Element("div.popover").adopt([new Element("div.popover-arrow"),r]),new t.Popover(i,e)},t.register("Popover",function(e,i){return new t.Popover(e,i)}),t.Popover}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){"use strict";document.body.addDelegatedEventListener('[data-dismiss="alert"]',"click",function(t,e){var i=e.closest(".alert"),n=e.closest("form");if(i&&i.remove(),n){var o=n.get("brickrouge.form");return o instanceof Brickrouge.Form?void o.clearAlert():void n.querySelectorAll(".has-danger").forEach(function(t){t.classList.remove("has-danger")})}})},function(t,e,i){var n,o;n=[i(1)],o=function(t){"use strict";var e=null,i=null;t.updateAssets=function(t,n){var o,s=[],r=[];return null===e&&(e=[],"undefined"!=typeof brickrouge_cached_css_assets&&(e=brickrouge_cached_css_assets),document.head.querySelectorAll('link[type="text/css"]').forEach(function(t){e.push(t.getAttribute("href"))})),null===i&&(i=[],"undefined"!=typeof brickrouge_cached_js_assets&&(i=brickrouge_cached_js_assets),document.html.querySelectorAll("script").forEach(function(t){var e=t.getAttribute("src");e&&i.push(e)})),t.css.each(function(t){-1==e.indexOf(t)&&s.push(t)}),s.each(function(t){new Asset.css(t),e.push(t)}),t.js.each(function(t){-1==i.indexOf(t)&&r.push(t)}),(o=r.length)?void r.each(function(t){new Asset.javascript(t,{onload:function(){i.push(t),--o||n()}})}):void n()}}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1)],o=function(t){"use strict";t.Carousel=new Class({Implements:[Options,Events],options:{autodots:!1,autoplay:!1,delay:6e3,dotStyle:"default",method:"fade",positionPattern:null},initialize:function(t,e){this.element=t=document.id(t),this.setOptions(e),this.inner=t.querySelector(".carousel-inner"),this.slides=this.inner.getChildren(),this.limit=this.slides.length,this.position=0,this.positionEl=null,this.timer=null,this.options.method&&(this.setMethod(this.options.method),this.method.initialize&&this.method.initialize.apply(this)),this.options.autodots&&this.setDots(this.slides.length),this.dots=t.querySelectorAll(".carousel-dots .dot"),this.dots.length||(this.dots=null),this.dots&&this.dots[0].classList.add("active"),this.options.positionPattern&&!this.positionEl&&(this.positionEl=new Element("div.carousel-position"),this.element.appendChild(this.positionEl)),t.addEvents({'click:relay([data-slide="prev"])':function(t){t.stop(),this.prev()}.bind(this),'click:relay([data-slide="next"])':function(t){t.stop(),this.next()}.bind(this),"click:relay([data-position])":function(t,e){t.stop(),this.setPosition(e.get("data-position"))}.bind(this),"click:relay([data-link])":function(t,e){var i=e.get("data-link");i&&(document.location=i)},mouseenter:this.pause.bind(this),mouseleave:this.resume.bind(this)}),this.updatePositionDisplay(),this.resume()},setDots:function(t){for(var e=new Element("div.carousel-dots"),i=this.element.querySelector(".carousel-dots"),n=this.options.dotStyle,o=0;t>o;o++)e.adopt(new Element("div.dot",{html:"numeric"==n?o+1:"&bull;","data-position":o}));i?e.replaces(i):this.element.adopt(e)},setMethod:function(e){if("string"==typeOf(e)){var i=t.Carousel.Methods[e];if(void 0===i)throw new Error("Carousel method is not defined: "+e);e=i}this.method=e,e.next&&(this.next=e.next),e.prev&&(this.prev=e.prev),"resize"in e&&window.addEvent("resize",e.resize.bind(this))},play:function(){this.timer||(this.timer=function(){this.setPosition(this.position+1)}.periodical(this.options.delay,this),this.fireEvent("play",{position:this.position,slide:this.slides[this.position]}))},pause:function(){this.timer&&(clearInterval(this.timer),this.timer=null,this.fireEvent("pause",{position:this.position,slide:this.slides[this.position]}))},resume:function(){this.options.autoplay&&this.play()},setPosition:function(t,e){t%=this.limit,t!=this.position&&(this.method.go.apply(this,[t,e]),this.updatePositionDisplay(),this.fireEvent("position",{position:this.position,slide:this.slides[this.position]}))},prev:function(){this.setPosition(this.position?this.position-1:this.limit-1,-1)},next:function(){this.setPosition(this.position==this.limit?0:this.position+1,1)},updatePositionDisplay:function(){var t=this.position,e=this.limit,i=this.positionEl,n=this.dots;i&&(i.innerHTML=this.options.positionPattern.replace(/\{(\d+)\}/g,function(i,n){switch(n){case"0":return t+1;case"1":return e}})),n&&(n.classList.remove("active"),n[t].classList.add("active"))}}),t.Carousel.Methods={fade:{initialize:function(){this.slides.each(function(t,e){t.setStyles({left:0,top:0,position:"absolute",opacity:e?0:1,visibility:e?"hidden":"visible"})})},go:function(t){var e=this.slides[this.position],i=this.slides[t];i.setStyles({opacity:0,visibility:"visible"}).inject(e,"after").fade("in"),this.position=t}},slide:{initialize:function(){var t=this.view=new Element("div",{styles:{position:"absolute",left:0,top:0}});t.adopt(this.slides),t.set("tween",{property:"left",onComplete:this.method.onComplete.bind(this)}),this.slides.each(function(t,e){e&&t.setStyle("display","none")}),this.method.resize.apply(this),this.inner.adopt(t)},resize:function(){var t=this.inner.getSize(),e=t.x,i=t.y;this.w=e,this.h=i,this.view.get("tween").cancel(),this.view.setStyles({width:2*e,height:i}),this.slides.each(function(t){t.setStyles({position:"absolute",width:e})})},go:function(t,e){var i=this.slides[t],n=this.slides[this.position],o=this.w;e||(e=t-this.position),n.setStyle("left",e>0?-o:o),i.setStyles({display:"",left:0}),this.view.setStyle("left",e>0?o:-o).tween(0),this.position=t},onComplete:function(){var t=this.slides[this.position];this.slides.each(function(e){e!=t&&e.setStyle("display","none")})}},columns:{initialize:function(){this.working=!1,this.fitting=0,this.childWidth=0;var t=0,e=0,i=0,n=this.element.getSize().x;this.view=new Element("div",{styles:{position:"absolute",top:0,left:0,height:this.element.getStyle("height")}}),this.view.adopt(this.slides),this.view.inject(this.inner),this.view.set("tween",{property:"left"}),this.slides.each(function(n){n.get("data-url")&&n.setStyle("cursor","pointer");var o=n.getSize().x+n.getStyle("margin-left").toInt()+n.getStyle("margin-right").toInt();n.setStyles({position:"absolute",top:0,left:t}),t+=o,e+=o,i=Math.max(i,o)},this),this.childWidth=i,this.fitting=(n/i).floor(),this.view.setStyle("width",e)},go:function(t){var e,i,n=this.limit,o=this.position-t;this.working||(this.working=!0,e=0>o?this.position+this.fitting:this.position-o,0>e?e=n+e:e>n-1&&(e-=n),0>t?t=n-o:t%=n,this.position=t,i=0>o?this.childWidth*this.fitting:-this.childWidth,this.slides[e].setStyle("left",i),this.view.get("tween").start(this.childWidth*o).chain(function(){for(var e=t,i=0,o=this.childWidth;n>e;e++,i+=o)this.slides[e].setStyle("left",i);for(e=0;t>e;e++,i+=o)this.slides[e].setStyle("left",i);this.view.setStyle("left",0),this.working=!1}.bind(this)))},next:function(){this.setPosition(this.position+1)},prev:function(){this.setPosition(this.position-1)}}},t.register("Carousel",function(e,i){return new t.Carousel(e,i)})}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[],o=function(){Object.forEach=Object.forEach||function(t,e,i){for(var n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)},!function(t){t.getChildren=t.getChildren||function(t){"use strict";for(var e=[],i=this.firstElementChild;i;)(!t||t&&i.matches(t))&&e.push(i),i=i.nextElementSibling;return e},t.addDelegatedEventListener=function(t,e,i,n){this.addEventListener(e,function(e){var n=e.target,o=n.closest(t);return o?void i(e,o,n):null},n)}}(Element.prototype),!function(t){t.forEach=t.forEach||function(t,e){Array.prototype.forEach.call(this,t,e)}}(NodeList.prototype)}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){"use strict";function i(){document.body.querySelectorAll(o).forEach(function(t){t.parentNode.classList.remove("open")})}function n(){var t,e=this.getAttribute("data-target")||this.getAttribute("href"),n=(e?document.getElementById(e):null)||this.parentNode;t=n.classList.contains("open"),i(),!t&&n.classList.toggle("open")}var o='[data-toggle="dropdown"]',s=o+":not(.disabled)",r=null;document.body.addDelegatedEventListener(s,"click",function(t,e){t.preventDefault(),t.stopPropagation(),r=t,n.apply(e)}),document.body.addEventListener("click",function(t){return r===t?void(r=null):void i()})},function(t,e,i){var n,o;n=[i(1)],o=function(t){"use strict";var e=new Class({Implements:[Options,Events],options:{url:null,useXHR:!1,replaceOnSuccess:!1},initialize:function(t,e){var i=this;this.element=t,this.setOptions(e),t.store("brickrouge.form",this),t.addEvent("submit",function(t){i.isProcessingSubmit&&(t.preventDefault(),i.submit())})},isProcessingSubmit:function(){var t=this.options;return t.useXHR||t.onRequest||t.onComplete||t.onFailure||t.onSuccess||t.replaceOnSuccess},alert:function i(t,e){var n=t,i=this.element.querySelector(".alert-"+e)||new Element("div.alert.alert-"+e).adopt(new Element('button.close[type="button"][data-dismiss="alert"]',{html:"×"}));"string"==typeOf(t)?t=[t]:"object"==typeOf(t)&&(t=[],Object.forEach(n,function(e,i){if("string"==typeOf(i)&&"_base"!=i){var n,o,s,r=null,a=document.id(this.element.elements[i]);if("collection"==typeOf(a))if(n=document.id(a[0]).closest("div.radio-group"),r=n.closest(".form-group"),n)n.classList.add("has-danger");else for(o=0,s=a.length;s>o;o++)document.id(a[o]).classList.add("has-danger");else a&&(a.classList.add("has-danger"),r=a.closest(".control-group"));r&&r.classList.add("has-danger")}e&&e!==!0&&t.push(e)},this)),t.length&&(t.forEach(function(t){i.appendChild(new Element("p",{html:t}))}),this.insertAlert(i))},insertAlert:function(t){var e=this.element;t.classList.contains("alert-success")&&this.options.replaceOnSuccess?(t.querySelector('[data-dismiss="alert"]').remove(),t.classList.add("dismissible"),t.inject(e,"before"),e.classList.add("hidden")):t.closest()||t.inject(e,"top")},clearAlert:function(){var t=this.element;t.querySelectorAll(".alert.dismissible").forEach(function(t){t.remove()}),t.querySelectorAll(".has-danger").forEach(function(t){t.classList.remove("has-danger")})},submit:function(){this.fireEvent("submit",{}),this.getOperation().send(this.element)},getOperation:function(){return this.operation?this.operation:this.operation=new Request.JSON({url:this.options.url||this.element.action,method:this.element.get("method")||"GET",onRequest:this.request.bind(this),onComplete:this.complete.bind(this),onSuccess:this.success.bind(this),onFailure:this.failure.bind(this)})},request:function(){this.clearAlert(),this.fireEvent("request",arguments)},complete:function(){this.fireEvent("complete",arguments)},success:function(t){t.message&&this.alert(t.message,"success"),this.fireEvent("success",arguments).fireEvent("complete",arguments)},failure:function(t){var e={};try{e=JSON.decode(t.responseText),e.errors&&this.alert(e.errors,"danger"),e.exception&&alert(e.exception)}catch(i){console&&console.log(i),alert(t.statusText)}this.fireEvent("failure",[t,e])}});return e.STORED_KEY_NAME="_brickrouge_form_key",t.Form=e,e}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1),i(2)],o=function(t){"use strict";document.body.addDelegatedEventListener('[data-toggle="modal"]',"click",function(e,i){var n=i.get("href").substring(1),o=document.getElementById(n);o&&(e.preventDefault(),e.stopPropagation(),t.Modal.from(o).toggle())}),document.body.addDelegatedEventListener('[data-dismiss="modal"]',"click",function(e,i){var n,o=i.closest(".modal");o&&(e.preventDefault(),e.stopPropagation(),n=t.Modal.from("modal"),n?n.hide():o.classList.add("hide"))})}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){"use strict";!function(t){if(t.closest=t.closest||function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}return null},t.remove=t.remove||function(){this.parentNode&&this.parentNode.removeChild(this)},t.matches=t.matches||t.matchesSelector||t.webkitMatchesSelector||t.msMatchesSelector||t.oMatchesSelector,!t.matches)throw new Error("Unable to implement Element.prototype.matches")}(Element.prototype)},function(t,e,i){var n,o;n=[i(1),i(3)],o=function(t){"use strict";function e(e){return n[t.uidOf(e)]}function i(e){var i,o=t.uidOf(e);return o in n?n[o]:(i=t.Dataset.from(e),i.anchor=e,n[o]=t.Popover.from(i))}var n=[];document.body.addDelegatedEventListener('[rel="popover"]',"mouseover",function(t,e){i(e).show()}),document.body.addDelegatedEventListener('[rel="popover"]',"mouseout",function(t,i){var n=e(i);n&&n.hide()})}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1)],o=function(t){"use strict";var e=new Class({Implements:t.Utils.Busy,initialize:function(t,e){this.element=t,this.options=e}});t.register("SearchBox",function(t,i){return new e(t,i)})}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1)],o=function(t){"use strict";document.body.addDelegatedEventListener('[data-toggle="tab"]:not(.disabled)',"click",function(t,e){var i,n,o=e.getAttribute("href");if("#"==o){var s=Array.prototype.indexOf.call(e.closest(".nav-tabs").querySelectorAll('[data-toggle="tab"]'),e);i=e.closest(".tabbable").querySelectorAll(".tab-content .tab-pane").item(s)}else i=document.id(o.substring(1));if(t.preventDefault(),!i)throw new Error("Invalid pane id: "+o);n=e.closest(".nav-tabs").getFirst(".active"),n&&n.classList.remove("active"),e.closest("li").classList.add("active"),n=i.closest(".tab-content").getFirst(".active"),n&&n.classList.remove("active"),i.classList.add("active")}),t.observe("update",function(t){t.querySelectorAll(".nav-tabs-fill").forEach(function(t){var e=t.querySelectorAll("a"),i=e[e.length-1],n=i.getCoordinates(t),o=t.getSize(),s=o.x-(n.left+n.width),r=s/e.length/2|0,a=s-r*e.length*2;i.setStyle("padding-right",i.getStyle("padding-right").toInt()+a),e.forEach(function(t){t.setStyle("padding-left",t.getStyle("padding-left").toInt()+r),t.setStyle("padding-right",t.getStyle("padding-right").toInt()+r)})})})}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1)],o=function(t){var e=[];t.Tooltip=new Class({Implements:[Options],options:{animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0},initialize:function(t,e){this.setOptions(e),this.anchor=document.id(t),this.element=Elements.from(this.options.template).shift(),this.setContent(t.get("data-tooltip-content"))},setContent:function(t){this.element.querySelector(".tooltip-inner")[this.options.html?"innerHTML":"innerText"]=t,["fade","in","top","bottom","left","right"].forEach(this.element.classList.remove,this.element)},getPosition:function(t){var e=this.anchor,i=0,n=0,o=e.offsetWidth,s=e.offsetHeight;if(!t){var r=e.getPosition();i=r.y,n=r.x}if("AREA"==e.tagName){var a=null,l=null,c=null,h=null,u=e.parentNode,d=u.id||u.name,p=document.body.querySelector('[usemap="#'+d+'"]');r=p.getPosition(),i=r.y,n=r.x,e.coords.match(/\d+\s*,\s*\d+/g).each(function(t){var e=t.match(/(\d+)\s*,\s*(\d+)/),i=e[1],n=e[2];a=null===a?i:Math.min(a,i),l=null===l?i:Math.max(l,i),c=null===c?n:Math.min(c,n),h=null===h?n:Math.max(h,n)}),i+=c,n+=a,o=l-a+1,s=h-c+1}return Object.append({},{y:i,x:n},{width:o,height:s})},show:function(){var t,i,n,o,s=this.element,r=this.options,a=r.placement,l={};switch(r.animation&&s.classList.add("fade"),"function"==typeOf(a)&&(a=a.call(this,s,anchor)),t=/in/.test(a),s.setStyles({top:0,left:0,display:"block"}).inject(t?this.anchor:document.body),n=s.offsetWidth,o=s.offsetHeight,i=this.getPosition(t),t?a.split(" ")[1]:a){case"bottom":l={top:i.y+i.height,left:i.x+i.width/2-n/2};break;case"top":l={top:i.y-o,left:i.x+i.width/2-n/2};break;case"left":l={top:i.y+i.height/2-o/2,left:i.x-n};break;case"right":l={top:i.y+i.height/2-o/2,left:i.x+i.width}}e.unshift(this),s.setStyles(l).classList.add(a).classList.add("in")},hide:function(){var t=this.element;e.erase(this),t.classList.remove("in"),t.dispose()}}),t.Tooltip.hideAll=function(){Array.slice(e).each(function(t){t.hide()})},document.body.addEvent("mouseenter:relay([data-tooltip-content])",function(e,i){var n=i.retrieve("tooltip");n||(n=new t.Tooltip(i,t.extractDataset(i,"tooltip")),i.store("tooltip",n)),n.show()}),document.body.addEvent("mouseleave:relay([data-tooltip-content])",function(t,e){try{e.retrieve("tooltip").hide()}catch(i){}})}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1)],o=function(t){"use strict";function e(){this.busyNest=0}e.prototype.startBusy=function(){1!=++this.busyNest&&this.element.classList.add("busy")},e.prototype.finishBusy=function(){--this.busyNest||this.element.classList.remove("busy")},t.Utils={Busy:e}}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1)],o=function(t){"use strict";function e(){}return e.prototype.getCoordinates=function(){var t=document.documentElement.scrollLeft||window.pageXOffset,e=document.documentElement.scrollTop||window.pageYOffset,i=document.documentElement.clientWidth,n=document.documentElement.clientHeight;return{left:t,top:e,width:i,height:n,x1:t,y1:e,x2:t+i-1,y2:e+n-1}},e.prototype.isElementVisible=function(t){var e=this.getCoordinates(),i=t.getCoordinates(),n=e.y1,o=e.y2,s=i.top,r=i.height,a=s+r-1;return s>=n&&o>s||n>s&&a>n},t.viewport=new e,e}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e){!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n,o;n=[i(1),i(2),i(3),i(4),i(5)],o=function(t){return window.Brickrouge=t}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n;n=function(){return{}}.call(e,i,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,i){var n,o;n=[i(1)],o=function(t){var e=0;t.uidOf=function(t){return t.uniqueNumber||(t.uniqueNumber=++e)},t.empty=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},t.camelCase=function(t){return String(t).replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()})},t.Dataset={from:function(e){var i={};e=e.attributes;for(var n,o=0,s=e.length;s>o;o++)n=e[o],n.name.match(/^data-/)&&(i[t.camelCase(n.name.substring(5))]=n.value);return i}}}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1)],o=function(t){function e(){}e.prototype={getObservers:function(t){var e;return"$brickrouge:observers"in this||(this["$brickrouge:observers"]=[]),e=this["$brickrouge:observers"],t?(t in e||(e[t]=[]),e[t]):e},observe:function(t,e){var i=this.getObservers(t);if(-1!==i.indexOf(e))throw Error("Observer already attached for type `"+t+"`");i.push(e)},unobserve:function(t){var e,i,n,o=this.getObservers(null);for(e in Object.keys(o))i=o[e],n=i.indexOf(t),-1!==n&&i.splice(n,1)},notify:function(t,e){var i,n,o=this.getObservers(t);if(o.length)for(i=0,n=o.length;n>i;i++)try{o[i].apply(null,e)}catch(s){console.error(s)}}},t.Subject=e,t.observe=e.prototype.observe,t.unobserve=e.prototype.unobserve,t.notify=e.prototype.notify,t.getObservers=e.prototype.getObservers}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1)],o=function(t){function e(t){if(!(t in c))throw Error("There is no widget factory for type `"+t+"`");return c[t]}function i(t){return"object"==typeof t&&"getAttribute"in t&&!!t.getAttribute("brickrouge-is")}function n(e){return t.uidOf(e)in h}function o(t){t.setAttribute("brickrouge-invalid-is",t.getAttribute("brickrouge-is")),t.removeAttribute("brickrouge-is")}function s(i){var n=t.uidOf(i);if(n in h)return h[n];var s=i.getAttribute("brickrouge-is"),r=null;if(!s)throw o(i),Error("The `brickrouge-is` attribute is not defined or empty.");try{var a,l=e(s);a=i.hasAttribute("brickrouge-options")?JSON.parse(i.getAttribute("brickrouge-options")):t.Dataset.from(i),r=l(i,a)}catch(c){console.error(c)}if(!r)throw o(i),Error("The widget factory `"+s+"` failed to build the widget.");i.setAttribute("brickrouge-built","");try{t.notify("widget",[r])}catch(c){console.error(c)}return h[n]=r}function r(e){var o,r,a=0,l=[];if(e=e||document.body,-1===u.indexOf(e)){if(u.push(e),i(e)&&!n(e))try{l.push(s(e))}catch(c){console.error(c)}for(o=e.querySelectorAll("[brickrouge-is]:not([brickrouge-built])"),r=o.length;r>a;a++)try{l.push(s(o[a]))}catch(c){console.error(c)}u.splice(u.indexOf(e),1),t.notify("update",[e,o,l])}}function a(){function t(t){new t(function(t){var e=[];t.forEach(function(t){Array.prototype.forEach.call(t.addedNodes,function(t){t instanceof Element&&-1===e.indexOf(t)&&e.push(t)})}),e.length&&e.forEach(r)}).observe(document.body,{childList:!0,subtree:!0})}function e(){var t=document.body.innerHTML;setInterval(function(){t!=document.body.innerHTML&&(t=document.body.innerHTML,r(document.body))},1e3)}var i=MutationObserver||WebkitMutationObserver;i?t(i):e()}function l(t,e){c[t]=e}var c=[],h=[],u=[];return t.isWidget=i,t.isBuilt=n,t.register=l,t.registered=e,t.from=s,t.run=function(){a(),r(document.body),t.notify("running")},t.Widget={IS_ATTRIBUTE:"brickrouge-is",BUILT_ATTRIBUTE:"brickrouge-built",OPTIONS_ATTRIBUTE:"brickrouge-options",SELECTOR:"[brickrouge-is]",from:s,register:l,registered:e}}.apply(e,n),!(void 0!==o&&(t.exports=o))},function(t,e,i){var n,o;n=[i(1),i(4)],o=function(t,e){t.clone=function(t){var i=e.BUILT_ATTRIBUTE;return t=t.cloneNode(!0),t.removeAttribute(i),Array.prototype.forEach.call(t.querySelectorAll("["+i+"]"),function(t){t.removeAttribute(i)}),t}}.apply(e,n),!(void 0!==o&&(t.exports=o))}])}]);